<!DOCTYPE html>
<html>
<head>
    <title>CATS-Portfolio Release Tracking Board-0.1</title>
    <!--  (c) 2017 CA Technologies.  All Rights Reserved. -->
    <!--  Build Date: Tue Dec 04 2018 17:05:00 GMT-0800 (Pacific Standard Time) -->

    <script type="text/javascript">
        var APP_BUILD_DATE = "Tue Dec 04 2018 17:05:00 GMT-0800 (Pacific Standard Time)";
        var ARTIFACT = "F529";
        var BUILDER  = "marjo60";
        var CHECKSUM = 88490146623;
    </script>

    <script type="text/javascript" src="/apps/2.1/sdk.js"></script>
    <!-- our highcharts (needed so that we can add patterns)
    <script type="text/javascript" src="/apps/2.1/lib/analytics/analytics-all.js"></script>
    -->


    <script type="text/javascript">
        Rally.onReady(function() {
            Ext.define("Rally.technicalservices.InfoLink",{extend:"Rally.ui.dialog.Dialog",alias:"widget.tsinfolink",informationHtml:null,title:"Build Information",defaults:{padding:5,margin:5},closable:!0,draggable:!0,autoShow:!0,width:350,informationalConfig:null,showLog:!1,logger:null,items:[{xtype:"container",itemId:"information"},{xtype:"container",itemId:"button_box"}],initComponent:function(){Ext.id(this);this.title="<span class='icon-help'> </span>"+this.title,this.callParent(arguments)},_generateChecksum:function(e){var t,i=305419896;for(e=(e=(e=e.replace(/var CHECKSUM = .*;/,"")).replace(/var BUILDER  = .*;/,"")).replace(/\s/g,""),t=0;t<e.length;t++)i+=e.charCodeAt(t)*t;return i},_checkChecksum:function(e){var i=Ext.create("Deft.Deferred"),r=this;return Ext.Ajax.request({url:document.URL,params:{id:1},success:function(e){if(text=e.responseText,CHECKSUM){var t=r._generateChecksum(text);if(CHECKSUM!==t)return void i.resolve(!1)}i.resolve(!0)}}),i.promise},_addToContainer:function(e){var t=Ext.apply({xtype:"container",height:200,overflowY:!0},this.informationalConfig);e.add(t)},afterRender:function(){var e=Rally.getApp();if(!Ext.isEmpty(this.informationalConfig)){var t=this.down("#information");this._addToContainer(t)}this.showLog&&this.logger&&this.down("#button_box").add({xtype:"rallybutton",text:"Show Log",listeners:{scope:this,click:function(){this.logger.displayLog()}}}),e.isExternal()?this.addDocked({xtype:"container",cls:"build-info",padding:2,dock:"bottom",html:"... Running externally"}):this._checkChecksum(e).then({scope:this,success:function(e){e||this.addDocked({xtype:"container",cls:"build-info",dock:"bottom",padding:2,html:'<span class="icon-warning"> </span>Checksums do not match'})},failure:function(e){console.log("oops:",e)}}),this.callParent(arguments)},beforeRender:function(){if(this.callParent(arguments),this.informationHtml&&this.addDocked({xtype:"component",componentCls:"intro-panel",padding:2,html:this.informationHtml,dock:"bottom"}),this.addDocked({xtype:"container",cls:"build-info",padding:2,dock:"bottom",html:"This app was created by the CA AC Technical Services Team."}),APP_BUILD_DATE){var e=Ext.String.format("Built on: {0} <br/>Built by: {1}",APP_BUILD_DATE,BUILDER);ARTIFACT&&(e=e+"<br/>Source artifact: "+ARTIFACT),this.addDocked({xtype:"container",cls:"build-info",padding:2,dock:"top",html:e})}}}),Ext.define("CArABU.technicalservices.Logger",{saveForLater:!1,saveLines:100,logArray:[],constructor:function(e){Ext.apply(this,e)},setSaveForLater:function(e){this.saveForLater=e},log:function(e){var t="[ "+Ext.util.Format.date(new Date,"Y-m-d H:i:s.u")+" ]",i=[];i=Ext.Array.push(i,[t]),i=Ext.Array.push(i,Ext.Array.slice(arguments,0)),this.saveForLater&&(this.logArray||(this.logArray=[]),this.logArray.push(i.join(" ")),this.logArray.length>this.saveLines&&this.logArray.shift()),window.console&&console.log.apply(console,i)},getLogText:function(){return this.logArray&&0!==this.logArray.length?this.logArray.join("<br/>"):"-- no log --"},displayLog:function(){var e=this.getLogText();this.popup=Ext.create("Rally.ui.dialog.Dialog",{width:Ext.getBody().getWidth()-20,height:Ext.getBody().getHeight()-20,closable:!0,title:"Log",autoShow:!0,layout:"border",defaults:{layout:"fit",width:"50%",border:!1},items:[{region:"center",xtype:"container",html:e,autoScroll:!0}]})}}),Ext.define("TSUtilities",{singleton:!0,loadWsapiRecords:function(e){var r=Ext.create("Deft.Deferred");return Ext.create("Rally.data.wsapi.Store",Ext.Object.merge({model:"Defect",fetch:["ObjectID"]},e)).load({callback:function(e,t,i){i?r.resolve(e):(console.error("Failed: ",t),r.reject("Problem loading: "+t.error.errors.join(". ")))}}),r.promise},loadAStoreWithAPromise:function(e,t){var r=Ext.create("Deft.Deferred");return Ext.create("Rally.data.wsapi.Store",{model:e,fetch:t}).load({callback:function(e,t,i){i?r.resolve(this):(console.error("Failed: ",t),r.reject("Problem loading: "+t.error.errors.join(". ")))}}),r.promise}}),Ext.define("CArABU.technicalservices.plugin.TrackingCardContentLeft",{alias:"plugin.trackingcardcontentleft",extend:"Rally.ui.cardboard.plugin.CardContentLeft",statics:{getIdTpl:function(){return this.idTpl||(this.idTpl=Ext.create("Rally.ui.renderer.template.FormattedIDTemplate")),this.idTpl},getHeaderTpl:function(){return this.headerTpl||(this.headerTpl=Ext.create("Ext.XTemplate",['<div class="left-header">','<div class="id" style="min-width: {idWidth}px">{formattedId}</div>','<div class="dependency {dep} field-content dependency"></div>',"</span>","</div>"])),this.headerTpl}},nonDisplayableFields:["PlanEstimate","FormattedID","Owner","PreliminaryEstimate","Estimate"],getCardHeader:function(){var e=this.card.getRecord(),t=Ext.clone(e.getData()),i=t.__groupedItem,r=t.__dependency,n=e.hasDependencies(),o=t.FormattedID,a=(this.card.usePoints,{dep:"",depID:""});if(i)return a.formattedId="<div class='formatted-id-template'>"+e.getGroupName()+"</div>",a.idWidth=20+8*e.getGroupName().length,r&&(a.dep="type-indicator picto icon-predecessor",a.depID=r),this.self.getHeaderTpl().apply(a);if(o){a.idWidth=20+8*o.length;var s=e.get("__items")&&e.get("__items")[0];return n&&(a.dep="type-indicator picto icon-predecessor"),a.formattedId=Rally.ui.cardboard.plugin.CardContentLeft.getIdTpl().apply(s),this.self.getHeaderTpl().apply(a)}return""},_isDisplayableField:function(e){var t=this.card.getRecord();return!(t.get("__isOrphan")&&!t.get("__isHidden"))&&!_.contains(this.nonDisplayableFields.concat(this.footerFields),e)}}),Ext.define("CArABU.technicalservices.plugin.TrackingCardContentRight",{alias:"plugin.trackingcardcontentright",extend:"Rally.ui.cardboard.plugin.CardContentRight",inheritableStatics:{BOTTOM_SIDE_CLS:"right-bottom-side",TOP_SIDE_CLS:"right-top-side"},init:function(e){((this.card=e).contentRightPlugin=this)._fieldNameToDisplay=this._getEstimateFieldName(),e.on("afterrender",this._onAfterRender,this),e.on("rerender",this._onAfterRender,this),e.on("validitychange",this._onValidityChange,this)},_initializePreliminaryEstimateStore:function(){this.cardboard.preliminaryEstimateStore=Ext.create("Rally.data.wsapi.Store",{model:Ext.identityFn("PreliminaryEstimate"),autoLoad:!0})},_hasField:function(t){return this.card.getRecord().hasField(t)&&_.some(this.card.getFields(),function(e){return e===t||e.name===t})},getDisplayedFields:function(){var e=[""];return this._fieldNameToDisplay&&e.push(this._fieldNameToDisplay),e},getHtml:function(){this._initCurrentStatus(),this._initCurrentEstimate();var e=Ext.clone(this.card.getRecord().data);return this.getTpl().apply(e)},getTpl:function(){if(!this.tpl){var i=this;this.tpl=Ext.create("Ext.XTemplate",['<td class="{[this.getTplClass()]}">','<div class="{[Rally.ui.cardboard.plugin.CardContentRight.TOP_SIDE_CLS]}">',"{[this.getTopTpl(values)]}","</div>",'<div class="{[Rally.ui.cardboard.plugin.CardContentRight.BOTTOM_SIDE_CLS]}">{[this.getBottomTpl(values)]}</div>',"</td>",{getTplClass:function(){return" has-estimate","rui-card-right-side has-estimate"},getTopTpl:function(e){return'<div class="field-content ItemSummary">'+i._currentEstimate+"</div>"},getBottomTpl:function(e){var t=i._currentStatus;return Ext.create("CArABU.ts.CardStatusTemplate","","State",t).apply(e)}}])}return this.tpl},_removeTooltip:function(){this.estimateTooltip&&this.estimateTooltip.destroy()},_onAfterRender:function(){this.cardboard=this.card.ownerColumn&&this.card.ownerColumn.ownerCardboard,this._removeTooltip();var e=this.card.getEl().down(".card-estimate-field");e&&this._shouldShowEstimate()&&(this.estimateTooltip=Ext.create("Rally.ui.tooltip.ToolTip",{target:e,hideDelay:100,anchor:"left",mouseOffset:[2,2],html:this._getTooltipHtml(),listeners:{beforeShow:function(){return!this.target.down(".rally-invalid-field")}}}),e.on("click",function(){this.estimateTooltip.hide()},this))},_onValidityChange:function(e,t,i){!i&&this.estimateTooltip&&this.estimateTooltip.hide()},_onOwnerClick:function(){this.card.fireEvent("fieldclick","Owner",this.card)},_initCurrentStatus:function(){var e="";switch(this.card.getRecord().getStatus()){case"done":e="icon-ok done";break;case"atrisk":e="icon-warning atrisk";break;case"willnotcomplete":e="icon-minus willnotcomplete"}this._currentStatus=e},_initCurrentEstimate:function(){var e=this.card.getRecord();this.card.usePoints?this._currentEstimate=Ext.String.format("{0} / {1}",e.get("__acceptedPoints"),e.get("__totalPoints")):this._currentEstimate=Ext.String.format("{0} / {1}",e.get("__acceptedCount"),e.get("__totalCount"))},_shouldShowEstimate:function(){return!!this._fieldNameToDisplay&&(this.card.getRecord().get("updatable")||!this._currentEstimate.needsValue)},_getTooltipHtml:function(){if(this._fieldNameToDisplay){if(this._currentEstimate.needsValue)return"<strong>Set "+this.card.getRecord().getField(this._fieldNameToDisplay).displayName+"</strong>";if("PlanEstimate"===this._fieldNameToDisplay)return this._getPlanEstimateTooltip();if("Estimate"===this._fieldNameToDisplay)return this._getTaskEstimateTooltip();if("PreliminaryEstimate"===this._fieldNameToDisplay&&this.cardboard){if(this.cardboard.preliminaryEstimateStore||this._initializePreliminaryEstimateStore(),this.cardboard.preliminaryEstimateStore.count())return this._getPreliminaryEstimateTooltip();this.cardboard.preliminaryEstimateStore.on("load",function(){this.estimateTooltip.update(this._getPreliminaryEstimateTooltip())},this,{single:!0})}}},_getPlanEstimateTooltip:function(){return"Plan Estimate ("+Rally.environment.getContext().getWorkspace().WorkspaceConfiguration.IterationEstimateUnitName+")"},_getTaskEstimateTooltip:function(){return"Estimate ("+Rally.environment.getContext().getWorkspace().WorkspaceConfiguration.TaskUnitName+")"},_getPreliminaryEstimateTooltip:function(){var e,t=this._currentEstimate.value,i=_.find(this.cardboard.preliminaryEstimateStore.data.items,function(e){return e.data.Name===t});return i?(e=i.data.Value,"<div><strong>Preliminary Estimate</strong></div><div>"+i.data.Description+" = "+e+" Point"+(1!==e?"s":"")+"</div>"):"Preliminary Estimate: "+t},destroy:function(){this._removeTooltip(),this.callParent(arguments)}}),Ext.define("Rally.ui.cardboard.plugin.ArtifactCardPopover",{alias:"plugin.artifactcardpopover",extend:"Ext.AbstractPlugin",requires:["Rally.ui.popover.PopoverFactory"],init:function(e){this.card=e,(this.card.popoverPlugin=this).card.on("rerender",this._onRerender,this),this.card.on("fieldclick",this._onFieldClick,this),this.card.on("mouseout",this._hidePopover,this)},destroy:function(){this.card&&(delete this.card.popoverPlugin,delete this.card),this.popover&&(this.popover.destroy(),delete this.popover),this.callParent(arguments)},showDescription:function(){/portfolioitem/.test(this.card.getRecord().getType())&&(Ext.getElementById("description-popover")||Ext.create("Rally.data.wsapi.Store",{model:this.card.getRecord().getType(),fetch:["FormattedID","Name","PlannedEndDate"],filters:[{property:"ObjectID",value:this.card.getRecord().getOid()}]}).load({callback:function(e,t){t.wasSuccessful()&&this._createPopover({context:this.card.context,field:"Description",record:e[0],offsetFromTarget:[{x:0,y:-10},{x:12,y:0},{x:0,y:10},{x:-15,y:0}],target:this.card.getEl().down(".formatted-id-template"),targetSelector:"."+this.card.getCardRecordCls()+" .formatted-id-template"})},scope:this}))},showItem:function(){/portfolioitem/.test(this.card.getRecord().getType())?Ext.create("Rally.data.wsapi.Store",{model:this.card.getRecord().getType(),fetch:["FormattedID","Name","PlannedEndDate"],filters:[{property:"ObjectID",value:this.card.getRecord().getOid()}]}).load({callback:function(e,t){t.wasSuccessful()&&this._createPopover({field:"UserStory",record:e[0],offsetFromTarget:[{x:0,y:-10},{x:12,y:0},{x:0,y:10},{x:-15,y:0}],target:this.card.getEl().down(".ItemSummary"),targetSelector:"."+this.card.getCardRecordCls()+" .ItemSummary",listViewConfig:{gridConfig:{columnCfgs:["FormattedID","Name","ScheduleState","PlanEstimate","Owner"],enableRanking:!1}}})},scope:this}):(this.card.select(),this.popover&&(this.popover.hide(),this.popover.destroy()),this.popover=Ext.create("Rally.ui.popover.OrphanPopover",{modelNames:this.card.getRecord().getItemModels(),title:this.card.getRecord().getGroupName(),gridConfig:{columnCfgs:["FormattedID","Name","ScheduleState","PlanEstimate","Owner"],storeConfig:{filters:this.card.getRecord().getItemFilters(),context:{project:null}}},offsetFromTarget:[{x:0,y:-10},{x:12,y:0},{x:0,y:10},{x:-15,y:0}],target:this.card.getEl().down(".ItemSummary"),targetSelector:"."+this.card.getCardRecordCls()+" .ItemSummary",offsetFromTarget:[{x:0,y:-8},{x:15,y:0},{x:5,y:8},{x:-15,y:0}],autoShow:!1}),this.popover.on("destroy",this._onPopoverDestroy,this),this.popover.show())},showdependency:function(){this.card.select(),this.popover&&this.popover.destroy(),this.card.fireEvent("showdependency",this.card)},_createPopover:function(e){this.popover&&(this._hidePopover(),this.popover.destroy()),this.card.select(),this.popover=Rally.ui.popover.PopoverFactory.bake(Ext.apply({autoShow:!1,autoCenter:!1},e)),this.popover.on("destroy",this._onPopoverDestroy,this),this.popover.show()},_onPopoverDestroy:function(){this.card&&this.card.deselect(),delete this.popover},_onPopoverAfterRender:function(){Rally.BrowserTest&&Rally.BrowserTest.publishComponentReady(this)},_onFieldClick:function(e){var t=this["show"+e];Ext.isFunction(t)&&t.call(this)},_onRerender:function(){this.popover&&(this.popover.alignToTarget(),this.popover.down(".rallylistview")&&this.popover.down(".rallylistview").realignGridEditor())},_hidePopover:function(e,t,i){_.isArray(i)&&0<i.length&&!_.isUndefined(i[0])&&i[0].removeCls("hover"),Ext.defer(function(){this&&this.rendered&&!(this.target&&this.target.hasCls("hover")||this.hasCls("hover")||this.chevron&&this.chevron.hasCls("hover"))&&this.destroy()},100,this)}}),Ext.define("CArABU.technicalservices.TrackingCard",{extend:"Rally.ui.cardboard.Card",alias:"widget.trackingcard",constructor:function(e){this.mergeConfig(e),this.hidden=this.record.get("__isHidden")||!1,this.callParent(arguments)},addDependentCards:function(e){this.dependentCards||(this.dependentCards=[]),this.dependentCards.push(e)},getDependentCards:function(){return this.dependentCards||[]},addPeerDependentCards:function(e){this.peerDependentCards||(this.peerDependentCards=[]),this.peerDependentCards.push(e)},getPeerDependentCards:function(){return this.peerDependentCards||[]},setupPlugins:function(){return _.uniq([{ptype:"artifactcardpopover"},{ptype:"trackingcardcontentleft"},{ptype:"trackingcardcontentright"}],"ptype")},getConnectorPoint:function(e,t){this.getEl();var i=this.getX(),r=this.getY(),n=this.getWidth(),o=this.getHeight(),a=i,s=r;return i<e&&(a=i+n-5),e==i&&(a=i+n/2),e<i&&(a=i+5),t==r&&(s=r+o/2),r<t&&(s=r+o-5),t<r&&(s=r+5),{x:a,y:s}},getHotSpot:function(){return{x:this.getX(),y:this.getY(),width:this.getWidth(),height:this.getHeight()}},showPopover:function(){this.getEl().on("mouseout",function(e){e.fireEvent("mouseout",this)},this),this.fireEvent("fieldclick","Item")},getDependencyHotSpot:function(){var e=this.getEl().down(".dependency");return{x:e.getX(),y:e.getY(),width:e.getWidth(),height:e.getHeight()}},getItemHotSpot:function(){var e=this.getEl().down(".ItemSummary");return{x:e.getX(),y:e.getY(),width:e.getWidth(),height:e.getHeight()}},getDescriptionHotSpot:function(){var e=this.getEl().down(".formatted-id-template");return{x:e.getX(),y:e.getY(),width:e.getWidth(),height:e.getHeight()}},_buildHtml:function(){var e=[];if(!this.record.get("__groupedItem")&&this.record.get("DisplayColor")){var t={tag:"div",cls:"artifact-color"};t.style={backgroundColor:this.record.get("DisplayColor")},e.push(Ext.DomHelper.createHtml(t))}return e.push('<div class="card-table-ct"><table class="card-table"><tr>'),Ext.Array.push(e,_.invoke(_.compact([this.contentLeftPlugin,this.contentRightPlugin]),"getHtml")),e.push("</tr></table>"),this.iconsPlugin&&e.push(this.iconsPlugin.getHtml()),e.push("</div>"),e.join("\n")}}),Ext.define("CArABU.technicalservices.portfolioreleasetracking.ArtifactModel",{extend:"Rally.data.Model",fields:[{name:"id"},{name:"Project"},{name:"Name",defaultValue:""},{name:"State",defaultValue:""},{name:"__risk",defaultValue:""},{name:"DisplayColor",defaultValue:""},{name:"FormattedID",defaultValue:null},{name:"__items",defaultValue:null},{name:"__groupedItem",defaultValue:!1},{name:"__totalCount",defaultValue:0},{name:"__acceptedCount",defaultValue:0},{name:"__totalPoints",defaultValue:0},{name:"__acceptedPoints",defaultValue:0},{name:"__childDependency",defaultValue:null},{name:"__childDependencies",defaultValue:!1},{name:"__peerDependencies",defaultValue:!1},{name:"__dateBucket",defaultValue:null},{name:"__doneStates",defaultValue:[]},{name:"__riskField",defaultValue:""},{name:"__atRiskValue",defaultValue:""},{name:"__willNotCompleteValue",defaultValue:""}],isSearch:function(){return!1},hasField:function(e){return!0},getId:function(){return this.get("id")},getType:function(){return this.get("__items")&&this.get("__items")[0]&&this.get("__items")[0]._type},getOid:function(){return this.get("__items")&&this.get("__items")[0]&&this.get("__items")[0].ObjectID},getField:function(t){var e=_.find(this.getFields(),function(e){return t==e.name});e||(e={name:t});var i=e.type||"string";return e.isCollection=function(){return!1},e.getType=function(){return i},e},addItem:function(e){var t=this.get("__items")||[];if(t.push(e),!1===this.get("__groupedItem")){this.set("Name",e.Name),this.set("FormattedID",e.FormattedID),this.set("DisplayColor",e.DisplayColor),e.State&&this.set("State",e.State.Name);var i=this.get("__riskField");i&&e[i]&&this.set("__risk",e[i])}this.set("__totalCount",this._setTotalCount(t)),this.set("__acceptedCount",this._setAcceptedCount(t)),this.set("__totalPoints",this._setTotalPoints(t)),this.set("__acceptedPoints",this._setAcceptedPoints(t)),this.set("Project",e.Project.Name),this.set("__items",t),this.set("__peerDependencies",e.__peerDependencies)},getItemFilters:function(){if(this.get("__childDependencies"))return[{property:"Feature.ObjectID",value:this.get("__items")[0].ObjectID},{property:"DirectChildrenCount",value:0}];var e=_.map(this.get("__items"),function(e){return{property:"ObjectID",value:e.ObjectID}});return Rally.data.wsapi.Filter.or(e)},getItemModels:function(){var e=[];return _.find(this.get("__items"),{_type:"hierarchicalrequirement"})&&e.push("HierarchicalRequirement"),_.find(this.get("__items"),{_type:"defect"})&&e.push("Defect"),0==e.length&&e.push("HierarchicalRequirement"),e},getGroupName:function(){var e=[];return _.find(this.get("__items"),{_type:"hierarchicalrequirement"})&&e.push("US"),_.find(this.get("__items"),{_type:"defect"})&&e.push("DE"),this.get("__childDependency")?e.join("/"):"Orphaned "+e.join("/")},addPeerDependency:function(e){var t=this.get("__peerDependencies")||[];t.push(e),this.set("__peerDependencies",t)},addChildDependency:function(e){var t=this.get("__childDependencies")||[];t.push(e),this.set("__childDependencies",t)},getStatus:function(){var e=this.get("State");if(e&&_.contains(this.get("__doneStates"),e))return"done";var t=this.get("__risk")||null;return t&&t===this.get("__atRiskValue")?"atrisk":t&&t===this.get("__willNotCompleteValue")?"willnotcomplete":null},_hasChildDependencies:function(){return this.get("__childDependencies")&&0<this.get("__childDependencies").length},_hasPeerDependencies:function(){return this.get("__peerDependencies")&&0<this.get("__peerDependencies").length},hasDependencies:function(){return this._hasChildDependencies()||this._hasPeerDependencies()},_setTotalCount:function(e){return this.get("__groupedItem")?e.length:0<e.length&&e[0].LeafStoryCount||0},_setTotalPoints:function(e){return this.get("__groupedItem")?Ext.Array.sum(_.map(e,function(e){return e.PlanEstimate||0})):0<e.length&&e[0].LeafStoryPlanEstimateTotal||0},_setAcceptedCount:function(e){return this.get("__groupedItem")?_.filter(e,function(e){return e.AcceptedDate}).length:0<e.length&&e[0].AcceptedLeafStoryCount||0},_setAcceptedPoints:function(e){return this.get("__groupedItem")?Ext.Array.sum(_.map(e,function(e){return e.AcceptedDate&&e.PlanEstimate||0})):0<e.length&&e[0].AcceptedLeafStoryPlanEstimateTotal||0}}),Ext.define("CArABU.ts.CardStatusTemplate",{extend:"Ext.XTemplate",constructor:function(e,t,i){var r="itemstate";i&&(r+=" "+i),this.callParent(['<div class="card-estimate-field">','<div class="field-content '+t+'">','<div class="'+r+'">',e,"</div>","</div>","</div>"])}}),Ext.define("CArABU.technicalservices.portfolioreleasetracking.DependencyMap",{boardX:0,boardY:0,xOffset:0,yOffset:0,constructor:function(e){Ext.apply(this,e),this._buildMap(e)},_buildMap:function(e){var t=e.board,n=t.getCards(),o=_.reduce(n,function(t,e){return _.each(e,function(e){e.getRecord().hasDependencies()&&e.getRecord().get("FormattedID")&&(t[e.getRecord().get("FormattedID")]=e)}),t},{});n=[];_.each(t.getCards(),function(r){_.each(r,function(e){var t=e.getRecord().get("__childDependency"),i=o[t];i&&(e.addDependentCards(i),i.addDependentCards(e)),_.each(r,function(i){var e=i.getRecord().get("__peerDependencies");_.each(e,function(e){var t=o[e];t&&(i.addPeerDependentCards(t),t.addPeerDependentCards(i))})}),n.push(e)},this)}),this.dependencyMap=o,this.cards=n},getDependencyCanvas:function(e,t){var i=this.dependencyMap;t&&t.getRecord()&&t.getRecord().get("FormattedID")&&(i=[this.dependencyMap[t.getRecord().get("FormattedID")]]);var r=e.getX(),a=-e.getY()-20;return items=[],_.each(i,function(r){var n=r.getX(),o=r.getY();_.each(r.getPeerDependentCards(),function(e){var t=r.getConnectorPoint(e.getX(),e.getY()),i=e.getConnectorPoint(n,o);items.push({type:"circle",fill:"blue",radius:5,x:t.x,y:t.y+a}),items.push({type:"circle",fill:"blue",radius:5,x:i.x,y:i.y+a}),items.push({type:"path",path:Ext.String.format("M{0} {1} L {2} {3}",t.x,t.y+a,i.x,i.y+a),fill:"transparent",stroke:"blue","stroke-width":"1"})}),_.each(r.getDependentCards(),function(e){var t=r.getConnectorPoint(e.getX(),e.getY()),i=e.getConnectorPoint(n,o);items.push({type:"circle",fill:"red",radius:5,x:t.x,y:t.y+a}),items.push({type:"circle",fill:"red",radius:5,x:i.x,y:i.y+a}),items.push({type:"path",path:Ext.String.format("M{0} {1} L {2} {3}",t.x,t.y+a,i.x,i.y+a),fill:"transparent",stroke:"red","stroke-width":"1"})})}),0===items.length?null:(_.each(this.cards,function(i){var e=i.getDependencyHotSpot();items.push({type:"rect",width:e.width,height:e.height,x:e.x,y:e.y+a,fill:"transparent",border:"transparent",style:{cursor:"pointer"},listeners:{click:function(e,t){i.fireEvent("showdependency",i)},scope:i}});e=i.getDescriptionHotSpot();items.push({type:"rect",width:e.width,height:e.height,x:e.x,y:e.y+a,fill:"transparent",border:"transparent",style:{cursor:"pointer"},listeners:{mouseover:function(e,t){i.fireEvent("fieldClick","Description")},mouseout:function(e,t){i.fireEvent("mouseout",i)},scope:i}});e=i.getItemHotSpot();items.push({type:"rect",width:e.width,height:e.height,x:e.x,y:e.y+a,fill:"transparent",border:"transparent",style:{cursor:"pointer"},listeners:{click:function(e,t){i.fireEvent("fieldclick","Item")},scope:i}})}),Ext.create("Ext.draw.Component",{style:Ext.String.format("position:relative; top:{0}px; left:{1}px;",-e.getHeight(),-r),itemId:"childDependencies",id:"dep",viewBox:!1,height:e.getHeight(),width:e.getWidth(),items:items}))}}),Ext.define("Rally.ui.popover.OrphanPopover",{alias:"widget.orphanpopover",extend:"Rally.ui.popover.TreeGridPopover",constructor:function(e){var t=Ext.create("Rally.data.wsapi.ParentChildMapper");e=Ext.apply({gridConfig:{enableRanking:!1,enableInlineAdd:!1,expandAllInColumnHeaderEnabled:!1,storeConfig:{mapper:t,context:{project:null},enableHierarchy:!0,fetch:["FormattedID","Name","ScheduleState","PlanEstimate","Owner"],pageSize:5}}},e),this.callParent(arguments)}}),Ext.define("CArABU.technicalservices.portfolioreleasetracking.BoardColumn",{extend:"Rally.ui.cardboard.Column",alias:"widget.artifactboardcolumn",_queryForData:function(){this.store.on("load",this._onStoreLoad,this),this._createAndAddCardsFromStore(this.store)},isMatchingRecord:function(e){return!0}}),Ext.define("CArABU.technicalservices.portfolioreleasetracking.BoardRowHeader",{extend:"Rally.ui.cardboard.row.Header",alias:"widget.artifactboardrowheader",_getTitle:function(){return this.getValue()}}),Ext.define("CArABU.technicalservices.portfolioreleasetracking.Board",{extend:"Rally.ui.cardboard.CardBoard",alias:"widget.portfolioreleasetrackingboard",config:{release:null,usePoints:!0,showStories:!0,showDefects:!0,showDependencies:!0,iterations:null,toFrontOnShow:!1,style:{"z-index":0},readOnly:!0,attribute:"__dateBucket",rowConfig:{collapsible:!1,field:"Project",fieldDef:{readOnly:!0,name:"Project"},headerConfig:{xtype:"artifactboardrowheader"}},columnConfig:{xtype:"artifactboardcolumn",autoLoadCardThreshold:1e3,columnHeaderConfig:{headerTpl:'<span class="iname">{Name}</span><tpl if="StartDate"><br/><span class="idates">{[Rally.util.DateTime.format(values.StartDate,"Y-m-d")]} - {[Rally.util.DateTime.format(values.EndDate,"Y-m-d")]}</span></tpl>'}},cardConfig:{xtype:"trackingcard"}},dependencies:null,constructor:function(e){this.mergeConfig(e),this.callParent(arguments)},getRowFor:function(e){var t=this.getRows(),i=e.isModel?e:e.getRecord();return this._hasValidRowField()?_.find(t,function(e){return e.isMatchingRecord(i)})||this._createRow({showHeader:!0,value:i.get(this.rowConfig.field),collapsible:this.rowConfig.collapsible||!1},!0):t[0]||this._createDefaultRow()},_renderColumns:function(){0<this.columnDefinitions.length&&(this._calculateMinWidth(),this.getEl().update(this._getColumnContainerHtml()),this.rowDefinitions=[],this._hasValidRowField()?_.each(this.rowConfig.values,function(e){this._createRow({showHeader:!0,value:e,collapsible:this.rowConfig.collapsible||!1})},this):this._createRow({showHeader:!1,isDefault:!0}),this._addColumnsToDom(),this.fireEvent("aftercolumnrender",this))},_getColumnRecords:function(e,t){var i=t?Rally.util.DateTime.format(t.EndDate,"Y-m-d"):null;return _.filter(e,function(e){return e.get("__dateBucket")==i})},_parseRows:function(){var r=_.reduce(this.results,function(i,e){return _.each(e,function(e){var t=e.get("Project");i[t._refObjectName]=t.Parent&&t.Parent._refObjectName||null}),i},{}),n=Ext.Array.sort(_.keys(r)),t=_.reduce(n,function(e,t,i){return _.contains(n,r[t])||e.push(t),e},[]);n.reverse();for(var e=_.difference(n,t);0<e.length;)t=_.reduce(e,function(e,t){if(_.contains(e,r[t])){var i=_.indexOf(e,r[t]);e.splice(i+1,0,t)}return e},t),e=_.difference(n,t);var i=_.reduce(this.artifacts,function(e,t){return _.contains(e,t.get("Project"))||e.push(t.get("Project")),e},[]),o=_.sortBy(i,function(e){return _.indexOf(t,e)});return this.rowConfig.values=o,Deft.Promise.when()},_retrieveModels:function(e){this.models=[Ext.create("CArABU.technicalservices.portfolioreleasetracking.ArtifactModel")],this.artifacts=this._buildArtifactRecords(this.results),this.onModelsRetrieved(e)},_buildColumnsFromModel:function(){var e=this.iterations,t=(this.usePoints,this.release,this.featureName,this.showStories,this.showDefects,this.showDependencies,this.artifacts),i=[];_.each(e,function(e){i.push({value:e.EndDate,xtype:"artifactboardcolumn",columnHeaderConfig:{headerData:e},store:Ext.create("Rally.data.custom.Store",{data:this._getColumnRecords(t,e)})})},this),i.push({value:null,xtype:"artifactboardcolumn",columnHeaderConfig:{headerData:{Name:"Unscheduled"}},store:Ext.create("Rally.data.custom.Store",{data:this._getColumnRecords(t,null)})}),this.fireEvent("columnsretrieved",this,i),this.columnDefinitions=[],this._toggleMask(!0),_.each(i,this.addColumn,this),this.renderColumns()},_buildArtifactRecords:function(e){var t=this.featureName,i=this.showDefects,r=this.showStories,n=this.showDependencies,o=this.iterations,a={},s=_.map(e[0],function(e){var t=Ext.create("CArABU.technicalservices.portfolioreleasetracking.ArtifactModel",{__dateBucket:this._getFeatureDateBucket(e,o),__doneStates:this.doneStates,__riskField:this.atRiskField,__atRiskValue:this.atRiskValue,__willNotCompleteValue:this.willNotCompleteValue,id:e.getId()});a[e.get("FormattedID")]=t;var i=e.getData();return i.__peerDependencies=e.get("__peerDependencies"),t.addItem(i),t},this);if(r||n){var l=e[1],c=this._groupDependencies(l,t,a);_.each(c,function(e){a[e.get("__childDependency")]&&a[e.get("__childDependency")].addChildDependency(e.get("FormattedID"))}),s=s.concat(c)}var d=[];return r&&(d=e[2]),i&&(d=d.concat(e[3])),s=s.concat(this._groupOrphans(d))},_getFeatureDateBucket:function(e,t){var i=e.get("PlannedEndDate"),r=null;return _.each(t,function(e){if(e.StartDate<i&&e.EndDate>=i)return r=Rally.util.DateTime.format(e.EndDate,"Y-m-d"),!1}),r},_groupOrphans:function(e){var o={},a=[];return _.each(e,function(e){var t=e.getData(),i=t.Project.Name,r=t.Iteration&&t.Iteration.Name||"Unscheduled";if(o[i]||(o[i]={}),!o[i][r]){var n=t.Iteration?Rally.util.DateTime.format(Rally.util.DateTime.fromIsoString(t.Iteration.EndDate),"Y-m-d"):null;o[i][r]=Ext.create("CArABU.technicalservices.portfolioreleasetracking.ArtifactModel",{__groupedItem:!0,Project:i,__dateBucket:n,id:e.getId()}),a.push(o[i][r])}o[i][r].addItem(t)}),a},_groupDependencies:function(e,s,l){var c={},d=[];return _.each(e,function(e){var t=e.getData(),i=t.Project.Name,r=t.Iteration&&t.Iteration.Name||"Unscheduled",n=t[s]||null,o=n&&n.Project._refObjectName!=i&&l[n.FormattedID]&&n.FormattedID||null;if(o){if(c[i]||(c[i]={}),c[i][r]||(c[i][r]={}),!c[i][r][o]){var a=t.Iteration?Rally.util.DateTime.format(Rally.util.DateTime.fromIsoString(t.Iteration.EndDate),"Y-m-d"):null;c[i][r][o]=Ext.create("CArABU.technicalservices.portfolioreleasetracking.ArtifactModel",{__groupedItem:!0,Project:i,__dateBucket:a,id:e.getId(),__childDependency:o}),d.push(c[i][r][n.FormattedID])}c[i][r][n.FormattedID].addItem(t)}}),d}}),Ext.define("CArABU.technicalservices.app.PortfolioReleaseTrackingBoard",{extend:"Rally.app.App",componentCls:"app",logger:new CArABU.technicalservices.Logger,defaults:{margin:10},integrationHeaders:{name:"CArABU.technicalservices.app.TSPortfolioReleaseTrackingBoard"},config:{defaultSettings:{usePoints:!0,atRiskField:"c_PIFeatureRiskLevel",doneStates:["Deployed","Released to Customers"],atRiskValue:"At risk for PI",willNotCompleteValue:"Will not complete in PI"}},style:"z-index:0",featureModel:"PortfolioItem/Feature",launch:function(){if(this._validate()){var e=this.getContext().getTimeboxScope().getRecord();this.on("resize",this._resizeDependents,this),this._fetchIterations(e).then({success:this._initializeApp,failure:this._showErrorNotification,scope:this})}},_resizeDependents:function(){this.toggleDependencies(this.getShowChildDependencies())},_validate:function(){return this.getContext().getTimeboxScope()&&"release"==this.getContext().getTimeboxScope().getType()?!!this.getContext().getTimeboxScope().getRecord()||(this._addAppMessage("Please select a Release from the dashboard scope."),!1):(this._addAppMessage("This app is intended for a Release scoped dashboard.  Please use the Edit Page... menu item to set the dashboard for a Release filter."),!1)},_fetchIterations:function(e){var r=Ext.create("Deft.Deferred");return Ext.create("Rally.data.wsapi.Store",{model:"Iteration",fetch:["Name","StartDate","EndDate"],limit:"Infinity",filters:[{property:"StartDate",operator:"<",value:e.get("ReleaseDate")},{property:"EndDate",operator:">",value:e.get("ReleaseStartDate")}],sorters:[{property:"StartDate",direction:"ASC"}],context:{projectScopeDown:!1,projectScopeUp:!1}}).load({scope:this,callback:function(e,t,i){i&&0<e.length?r.resolve(_.map(e,function(e){return e.getData()})):i?r.reject("No iterations found for the selected Release in the currently scoped project."):r.reject("Error loading Iterations: "+t.error.errors.join("<br/>"))}}),r.promise},getPortfolioItemName:function(){return this.featureModel&&1<this.featureModel.split("/").length&&this.featureModel.split("/")[1]},_showErrorNotification:function(e){Rally.ui.notify.Notifier.showError({message:e,allowHTML:!0})},_addAppMessage:function(e){this.removeAll(),this.add({xtype:"container",html:Ext.String.format('<div class="no-data-container"><div class="secondary-message">{0}</div></div>',e)})},toggleDependencies2:function(e){if(this.logger.log("toggleDependencies2",e),this.down("#dependencies")&&this.down("#dependencies").destroy(),e){var t=e.getX(),i=e.getY(),a=[],s=-e.getX()-e.getEl().getMargin().left,l=-e.getY()-e.getEl().getMargin().top,c=_.reduce(e.getCards(),function(t,e){return _.each(e,function(e){e.getRecord().hasDependencies()&&e.getRecord().get("FormattedID")&&(t[e.getRecord().get("FormattedID")]=e)}),t},{});_.each(e.getCards(),function(e){_.each(e,function(i){var e=i.getRecord().get("__childDependency"),t=c[e],r=i.getHotSpot();if(a.push({type:"rect",width:r.width,height:r.height,x:r.x+s,y:r.y+l,fill:"transparent",border:"transparent",style:{cursor:"pointer"},listeners:{click:function(e,t){i.fireEvent("fieldclick","Item")},mouseover:function(e,t){i.fireEvent("fieldClick","Description")},mouseout:function(e,t){i.fireEvent("mouseout")},scope:i}}),e&&t){var n=i.getConnectorPoint(t.getX(),t.getY()),o=t.getConnectorPoint(i.getX(),i.getY());a.push({type:"circle",fill:"red",radius:5,x:n.x+s,y:n.y+l}),a.push({type:"circle",fill:"red",radius:5,x:o.x+s,y:o.y+l}),a.push({type:"path",path:Ext.String.format("M{0} {1} L {2} {3}",n.x+s,n.y+l,o.x+s,o.y+l),fill:"transparent",stroke:"red","stroke-width":"1"})}})});var r=Ext.create("Ext.draw.Component",{style:Ext.String.format("position:absolute; top:{0}px; left:{1}px;z-index:1",i,t),itemId:"dependencies",id:"dep",viewBox:!1,margin:10,height:e.getHeight(),width:e.getWidth(),items:a});this.add(r)}},_initializeApp:function(i){this._addToggles(),this._fetchRecords(i).then({success:function(t){if(this.getShowPeerDependencies()){var e=t[0];this._fetchPeerDependencies(e).then({success:function(e){this._buildBoard(i,t)},failure:this._showErrorNotification,scope:this})}else this._buildBoard(i,t)},failure:this._showErrorNotification,scope:this})},_fetchPeerDependencies:function(e){var t=Ext.create("Deft.Deferred"),i=this.getContext().getTimeboxScope().getRecord().get("Name"),r=this.getPortfolioItemName(),n=_.map(e,function(e){return function(){return this._fetchWsapiRecords(this._getPeerDependentFeatureConfig(i,r,e))}},this);return Deft.Chain.sequence(n,this).then({success:function(i){_.each(e,function(e,t){e.set("__peerDependencies",_.map(i[t],function(e){return e.get("FormattedID")}))}),t.resolve(e)},failure:function(e){t.reject(e)},scope:this}),t.promise},_fetchRecords:function(e){var i=Ext.create("Deft.Deferred"),r=this.getContext().getTimeboxScope().getRecord().get("Name"),n=this.getPortfolioItemName();return this._fetchWsapiRecords(this._getFeatureConfig(r,n)).then({success:function(t){var e=[this._fetchWsapiRecords(this._getDependentStoryConfig(r,n,t)),this._fetchWsapiRecords(this._getOrphanStoryConfig(r,n)),this._fetchWsapiRecords(this._getOrphanDefectConfig(r))];Deft.Promise.all(e).then({success:function(e){e.unshift(t),i.resolve(e)},failure:function(e){i.reject(e)},scope:this})},failure:this._showErrorNotification,scope:this}),i.promise},_buildBoard:function(e,t){this.logger.log("_buildBoard",t),t&&(this.results=t),e&&(this.iterations=e),this.toggleDependencies(!1);var i=this.down("#trackingbboard");i&&i.destroy(),this.dependencyMap=null,this.add({xtype:"portfolioreleasetrackingboard",itemId:"trackingbboard",results:this.results,usePoints:this.getUsePoints(),showStories:this.getShowStories(),showDefects:this.getShowDefects(),showDependencies:this.getShowChildDependencies(),release:this.getContext().getTimeboxScope().getRecord().getData(),iterations:this.iterations,featureName:this.getPortfolioItemName(),context:this.getContext(),doneStates:this.getSetting("doneStates"),atRiskField:this.getSetting("atRiskField"),atRiskValue:this.getSetting("atRiskValue"),willNotCompleteValue:this.getSetting("willNotCompleteValue"),cardConfig:{usePoints:this.getUsePoints(),listeners:{showdependency:this._showCardDependency,scope:this}}}).on("load",this._buildDependencyMap,this)},_showCardDependency:function(e){this.logger.log("card",e),this.toggleDependencies(!0,e)},_buildDependencyMap:function(e){this.dependencyMap=Ext.create("CArABU.technicalservices.portfolioreleasetracking.DependencyMap",{board:e}),this.toggleDependencies(this.getShowChildDependencies())},toggleDependencies:function(e,t){this.logger.log("toggleDependencies",e),this.down("#childDependencies")&&this.down("#childDependencies").destroy();var i=this.down("#trackingboard")||this.down("portfolioreleasetrackingboard");if(this.logger.log("board",i),e&&this.down("portfolioreleasetrackingboard")&&this.dependencyMap){var r=this.dependencyMap.getDependencyCanvas(i,t);r&&this.add(r)}else this.logger.log("Show dependencies == false OR there is no board rendered.")},_addToggles:function(){this.add({xtype:"container",layout:"hbox",margin:5,style:"z-index:10!important;",items:[{xtype:"button",iconCls:"icon-story",itemId:"showStories",cls:"primary rly-small",margin:5,pressed:!0,enableToggle:!0,toggleHandler:this._toggleOptions,scope:this},{xtype:"button",iconCls:"icon-defect",itemId:"showDefects",cls:"primary rly-small",margin:5,pressed:!0,enableToggle:!0,toggleHandler:this._toggleOptions,scope:this},{xtype:"button",iconCls:"icon-predecessor",itemId:"showChildDependencies",cls:"primary rly-small",margin:5,pressed:!0,enableToggle:!0,toggleHandler:this._toggleOptions,scope:this}]})},_fetchWsapiRecords:function(e){var i=Ext.create("Deft.Deferred");return Ext.create("Rally.data.wsapi.Store",e).load({callback:function(e,t){t.wasSuccessful()?i.resolve(e):i.reject("Error loading records: "+t.error.errors.join(","))}}),i.promise},_getOrphanStoryConfig:function(e,t){return{model:"HierarchicalRequirement",fetch:["Name","FormattedID","Project","Release","PlanEstimate","Iteration","EndDate","AcceptedDate","Parent"],filters:[{property:"Release.Name",value:e},{property:t,value:""}],pageSize:2e3,limit:"Infinity"}},_getOrphanDefectConfig:function(e){return{model:"Defect",fetch:["Name","FormattedID","Project","Release","PlanEstimate","AcceptedDate","Iteration","EndDate","Parent"],filters:[{property:"Release.Name",value:e}],limit:"Infinity"}},_getDirectDependentFeatureConfig:function(e,t,i){var r=["Name","FormattedID","Project","Release","PlannedEndDate",t],n=(_.reduce(i,function(e,t){return _.contains(e,t.get("Project").ObjectID)||e.push(t.get("Project").ObjectID),e},[]),_.map(i,function(e){return Rally.data.wsapi.Filter.and([{property:"Predecessors.ObjectID",value:e.get("ObjectID")},{property:"Project.ObjectID",operator:"!=",value:e.get("Project").ObjectID}])}));return{model:"PortfolioItem/"+t,fetch:r,filters:n=Rally.data.wsapi.Filter.or(n),enablePostGet:!0,context:{project:null},pageSize:2e3,limit:"Infinity"}},_getDependentStoryConfig:function(e,t,i){var r=["Name","FormattedID","Project","Parent","Release","PlanEstimate","AcceptedDate","Iteration","EndDate",t],n=(_.reduce(i,function(e,t){return _.contains(e,t.get("Project").ObjectID)||e.push(t.get("Project").ObjectID),e},[]),_.map(i,function(e){return Rally.data.wsapi.Filter.and([{property:t+".ObjectID",value:e.get("ObjectID")},{property:"DirectChildrenCount",value:0},{property:"Project.ObjectID",operator:"!=",value:e.get("Project").ObjectID}])}));return{model:"HierarchicalRequirement",fetch:r,filters:n=Rally.data.wsapi.Filter.or(n),enablePostGet:!0,context:{project:null},pageSize:2e3,limit:"Infinity"}},_getPeerDependentFeatureConfig:function(e,t,i){return{model:"PortfolioItem/"+t,fetch:["DisplayColor","Name","FormattedID","PlannedEndDate","Project","Release","LeafStoryPlanEstimateTotal","AcceptedLeafStoryPlanEstimateTotal","LeafStoryCount","AcceptedLeafStoryCount","Parent","State"],filters:[{property:"Release.Name",value:e},{property:"Predecessors.ObjectID",value:i.get("ObjectID")}],context:{project:this.getContext().getProject()._ref,projectScopeDown:this.getContext().getProjectScopeDown()},pageSize:2e3,limit:"Infinity"}},_getFeatureConfig:function(e,t){var i=this.getSetting("atRiskField")||null,r=["DisplayColor","Name","FormattedID","PlannedEndDate","Project","Release","LeafStoryPlanEstimateTotal","AcceptedLeafStoryPlanEstimateTotal","LeafStoryCount","AcceptedLeafStoryCount","Parent","State"];return i&&r.push(i),{model:"PortfolioItem/"+t,fetch:r,filters:[{property:"Release.Name",value:e}],context:{project:this.getContext().getProject()._ref,projectScopeDown:this.getContext().getProjectScopeDown()},pageSize:2e3,limit:"Infinity"}},_toggleOptions:function(e,t){this.logger.log("_toggleOptions",e.cls,e.iconCls),t?(e.removeCls("secondary"),e.addCls("primary")):(e.removeCls("primary"),e.addCls("secondary")),"showChildDependencies"==e.itemId?this.toggleDependencies(t):this._buildBoard()},getShowStories:function(){return this.down("#showStories")&&this.down("#showStories").pressed},getShowDefects:function(){return this.down("#showDefects")&&this.down("#showDefects").pressed},getShowPeerDependencies:function(){return this.down("#showChildDependencies")&&this.down("#showChildDependencies").pressed},getShowChildDependencies:function(){return this.down("#showChildDependencies")&&this.down("#showChildDependencies").pressed},getUsePoints:function(){return"true"==this.getSetting("usePoints")||!0===this.getSetting("usePoints")},getSettingsFields:function(){var e="5 0 5 0";return[{name:"saveLog",xtype:"rallycheckboxfield",boxLabelAlign:"after",fieldLabel:"",margin:e,boxLabel:'Save Logging<br/><span style="color:#999999;"><i>Save last 100 lines of log for debugging.</i></span>'},{name:"usePoints",xtype:"rallycheckboxfield",boxLabelAlign:"after",fieldLabel:"",margin:e,boxLabel:"Show Leaf Story Points (uncheck to show leaf story count)"}]},getOptions:function(){return[{text:"About...",handler:this._launchInfo,scope:this}]},_launchInfo:function(){this.about_dialog&&this.about_dialog.destroy(),this.about_dialog=Ext.create("Rally.technicalservices.InfoLink",{showLog:this.getSetting("saveLog"),logger:this.logger})},isExternal:function(){return void 0===this.getAppId()}});

               Rally.launchApp('CArABU.technicalservices.app.PortfolioReleaseTrackingBoard', {
                   name: 'Portfolio Release Tracking Board'
               });
        });
    </script>

    <style type="text/css">

.app {
}
.tsinfolink {
    position:absolute;
    right:0px;
    width: 14px;
    height: 14px;
    border-radius: 7px;
    text-align: center;
    color: white;
    background: #C0C0C0;
    border-style: solid;
    border-width: 1px;
    margin-top: 25px;
    margin-right: 5px;
    cursor: pointer;
}

.idates {
  font-size: 11px;
  font-style: normal;
  color: #666;
  padding-top: 4px;
  font-family: NotoSans;
  display: block;

}

.ItemSummary {
  font-size: 12px;
  font-weight: bold;
  color: #666;
  font-family: NotoSans;
  display: block;
  padding: 3px;
  line-height: 15px;
  cursor: pointer;
  background-color: white;
}
.rui-card .rui-card-right-side {
    width: 50px;
    text-align: right;
}

.itemstate {
  font-size: 14px!important;
  font-weight: bold;
  font-family: NotoSans;
  display: block;
  padding: 3px;
  width: 16px;
  height: 16px;
  cursor: pointer;
  border-radius: 50%;
  margin: 6px;
}

.done {
  color: green;
  text-align: center;
}

.atrisk {
  color: #FAD200;
}

.willnotcomplete {
  color: #EE1C25;
}

.dependency {
  font-size: 10px;
  font-weight: bold;
  color: #666;
  font-family: NotoSans;
  display: block;
  padding: 3px;
  width: 16px;
  height: 16px;
  cursor: pointer;
  border-radius: 50%;

}

.dependencycomponent {
  position: absolute;
  x:0;
  y:0;
  left: 0px;
  top: 0px;
  z-index: inherit;
}

    </style>

</head>
<body></body>
</html>